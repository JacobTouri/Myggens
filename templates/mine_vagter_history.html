{% extends "base.html" %}

{% block title %}Tidligere vagter – Myggen's{% endblock %}

{% block content %}
    <h1>Tidligere vagter</h1>

    <p>
        <a href="{{ url_for('mine_vagter') }}">⬅ Tilbage til Mine vagter</a>
    </p>

    <form method="get" style="margin-bottom: 15px;">
        <label for="year">År</label>
        <select name="year" id="year">
            {% for y in years %}
                <option value="{{ y }}" {% if y == year %}selected{% endif %}>{{ y }}</option>
            {% endfor %}
        </select>

        <label for="month">Måned</label>
        <select name="month" id="month">
            {% for m in range(1, 13) %}
                <option value="{{ m }}" {% if m == month %}selected{% endif %}>
                    {{ "%02d"|format(m) }}
                </option>
            {% endfor %}
        </select>

        <button type="submit">Vis</button>
    </form>

    {% if not signups %}
        <p>Ingen vagter fundet for den valgte måned.</p>
    {% else %}
        <table border="1" cellpadding="4" cellspacing="0" style="border-collapse: collapse;">
            <thead>
                <tr>
                    <th>Dato</th>
                    <th>Sted</th>
                    <th>Beskrivelse</th>
                    <th>Start</th>
                    <th>Slut</th>
                    <th>Timer</th>
                </tr>
            </thead>
            <tbody>
                {% for item in signups %}
                    {% set shift = item.shift %}
                    <tr>
                        <td>{{ shift.date|dkdate }}</td>
                        <td>{{ shift.location }}</td>
                        <td>{{ shift.description }}</td>
                        <td>{{ item.work_start or "-" }}</td>
                        <td>{{ item.work_end or "-" }}</td>
                        <td style="text-align: right;">
                            {% if item.work_hours %}
                                {{ "%.2f"|format(item.work_hours) }}
                            {% else %}
                                0
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5" style="text-align: right;"><strong>I alt denne måned:</strong></td>
                    <td style="text-align: right;"><strong>{{ "%.2f"|format(total_hours) }} timer</strong></td>
                </tr>
            </tfoot>
        </table>
    {% endif %}
{% endblock %}
